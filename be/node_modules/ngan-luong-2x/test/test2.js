const NganLuong = require("../index");
var dateFormat = require("dateformat");

const nganluong = new NganLuong({
  isSandbox: true,
  merchant_site_code: "47806", //47806",
  secure_pass: "bf461a3f91986e894ab8a19c0f400546"
});

// tao url
var now = new Date(Date.now());
now.setMinutes(now.getMinutes() + 2);

// Basic usage
var time_limit = dateFormat(now, "dd/mm/yyyy,HH:MM");
console.log({ time_limit, now });
var url = nganluong.buildCheckoutUrl({
  return_url: "http://localhost:3000/callback-payment",
  affiliate_code: "",
  buyer_info: "",
  currency: "vnd",
  discount: "0",
  fee_cal: "0",
  fee_shipping: "0",
  order_code: "xxxxxxxxxxxxxxxx",
  order_description: "Mua acc sá»‘ fdfasd",
  price: "1000000",
  quantity: "1",
  receiver: "nhayhoc@gmail.com",
  tax: "0",
  transaction_info: "xxxxxxxxxxxxxxxxxxxxxxx",
  time_limit
});
console.log({ url });

// // check don hang
// nganluong
//   .checkOrderStatus("daylaordercode")
//   .then(data => console.log({ data }))
//   .catch(err => console.error(err));

// var result_callback = nganluong.verifyReturnUrl({
//   error_text: "",
//   price: "10000",
//   payment_id: "19682770",
//   transaction_info: "day la thong tin giao dich",
//   order_code: "laskjflkasjj8o3jflkdsjv",
//   payment_type: "2",
//   secure_code: "25a50fe5ef428e35addbbbafbe13dc40",
//   token_nl: "142989-8caae7fc844cc12a2328dc057aca43be"
// });
// console.log(result_callback);
