{"ast":null,"code":"import _regeneratorRuntime from\"D:/TMDT/GreenLifeWebsite/fe/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"D:/TMDT/GreenLifeWebsite/fe/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"D:/TMDT/GreenLifeWebsite/fe/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{useContext}from'react';import{Store}from'../store';import{Helmet}from'react-helmet-async';import Row from'react-bootstrap/Row';import Col from'react-bootstrap/Col';import MessageBox from'../components/MessageBox';import ListGroup from'react-bootstrap/ListGroup';import Button from'react-bootstrap/Button';import Card from'react-bootstrap/Card';import{Link,useNavigate}from'react-router-dom';import axios from'axios';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function CartScreen(){var navigate=useNavigate();var _useContext=useContext(Store),state=_useContext.state,ctxDispatch=_useContext.dispatch;var cartItems=state.cart.cartItems;var updateCartHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(item,quantity){var _yield$axios$get,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get(\"/api/products/\".concat(item._id));case 2:_yield$axios$get=_context.sent;data=_yield$axios$get.data;if(!(data.countInStock<quantity)){_context.next=7;break;}window.alert('Sorry. Product is out of stock');return _context.abrupt(\"return\");case 7:ctxDispatch({type:'CART_ADD_ITEM',payload:_objectSpread(_objectSpread({},item),{},{quantity:quantity})});case 8:case\"end\":return _context.stop();}},_callee);}));return function updateCartHandler(_x,_x2){return _ref.apply(this,arguments);};}();var removeItemHandler=function removeItemHandler(item){ctxDispatch({type:'CART_REMOVE_ITEM',payload:item});};var checkoutHandler=function checkoutHandler(){navigate('/signin?redirect=/shipping');};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Helmet,{children:/*#__PURE__*/_jsx(\"title\",{children:\"Gi\\u1ECF H\\xE0ng\"})}),/*#__PURE__*/_jsx(\"h1\",{children:\"Gi\\u1ECF H\\xE0ng\"}),/*#__PURE__*/_jsxs(Row,{children:[/*#__PURE__*/_jsx(Col,{md:8,children:cartItems.length===0?/*#__PURE__*/_jsxs(MessageBox,{children:[\"Gi\\u1ECF h\\xE0ng \\u0111ang tr\\u1ED1ng. \",/*#__PURE__*/_jsx(Link,{to:\"/\",children:\"H\\xE3y mua g\\xEC \\u0111\\xF3\"})]}):/*#__PURE__*/_jsx(ListGroup,{children:cartItems.map(function(item){return/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(Row,{className:\"align-items-center\",children:[/*#__PURE__*/_jsxs(Col,{md:4,children:[/*#__PURE__*/_jsx(\"img\",{src:item.image,alt:item.name,className:\"img-fluid rounded img-thumbnail\"}),' ',/*#__PURE__*/_jsx(Link,{to:\"/product/\".concat(item.slug),children:item.name})]}),/*#__PURE__*/_jsxs(Col,{md:3,children:[/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return updateCartHandler(item,item.quantity-1);},variant:\"light\",disabled:item.quantity===1,children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-minus-circle\"})}),' ',/*#__PURE__*/_jsx(\"span\",{children:item.quantity}),' ',/*#__PURE__*/_jsx(Button,{variant:\"light\",onClick:function onClick(){return updateCartHandler(item,item.quantity+1);},disabled:item.quantity===item.countInStock,children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-plus-circle\"})})]}),/*#__PURE__*/_jsxs(Col,{md:3,children:[item.price,\"\\u0111\"]}),/*#__PURE__*/_jsx(Col,{md:2,children:/*#__PURE__*/_jsx(Button,{onClick:function onClick(){return removeItemHandler(item);},variant:\"light\",children:/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash\"})})})]})},item._id);})})}),/*#__PURE__*/_jsx(Col,{md:4,children:/*#__PURE__*/_jsx(Card,{children:/*#__PURE__*/_jsx(Card.Body,{children:/*#__PURE__*/_jsxs(ListGroup,{variant:\"flush\",children:[/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsxs(\"h3\",{children:[\"T\\u1ED5ng thanh to\\xE1n (\",cartItems.reduce(function(a,c){return a+c.quantity;},0),' ',\"s\\u1EA3n ph\\u1EA9m): \",cartItems.reduce(function(a,c){return a+c.price*c.quantity;},0),\"\\u0111\"]})}),/*#__PURE__*/_jsx(ListGroup.Item,{children:/*#__PURE__*/_jsx(\"div\",{className:\"d-grid\",children:/*#__PURE__*/_jsx(Button,{type:\"button\",variant:\"primary\",onClick:checkoutHandler,disabled:cartItems.length===0,children:\"Thanh to\\xE1n\"})})})]})})})})]})]});}","map":{"version":3,"names":["useContext","Store","Helmet","Row","Col","MessageBox","ListGroup","Button","Card","Link","useNavigate","axios","jsx","_jsx","jsxs","_jsxs","CartScreen","navigate","_useContext","state","ctxDispatch","dispatch","cartItems","cart","updateCartHandler","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","item","quantity","_yield$axios$get","data","wrap","_callee$","_context","prev","next","get","concat","_id","sent","countInStock","window","alert","abrupt","type","payload","_objectSpread","stop","_x","_x2","apply","arguments","removeItemHandler","checkoutHandler","children","md","length","to","map","Item","className","src","image","alt","name","slug","onClick","variant","disabled","price","Body","reduce","a","c"],"sources":["D:/TMDT/GreenLifeWebsite/fe/src/screens/CartScreen.js"],"sourcesContent":["import { useContext } from 'react';\r\nimport { Store } from '../store';\r\nimport { Helmet } from 'react-helmet-async';\r\nimport Row from 'react-bootstrap/Row';\r\nimport Col from 'react-bootstrap/Col';\r\nimport MessageBox from '../components/MessageBox';\r\nimport ListGroup from 'react-bootstrap/ListGroup';\r\nimport Button from 'react-bootstrap/Button';\r\nimport Card from 'react-bootstrap/Card';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport axios from 'axios';\r\n\r\nexport default function CartScreen() {\r\n  const navigate = useNavigate();\r\n  const { state, dispatch: ctxDispatch } = useContext(Store);\r\n  const {\r\n    cart: { cartItems },\r\n  } = state;\r\n\r\n  const updateCartHandler = async (item, quantity) => {\r\n    const { data } = await axios.get(`/api/products/${item._id}`);\r\n    if (data.countInStock < quantity) {\r\n      window.alert('Sorry. Product is out of stock');\r\n      return;\r\n    }\r\n    ctxDispatch({\r\n      type: 'CART_ADD_ITEM',\r\n      payload: { ...item, quantity },\r\n    });\r\n  };\r\n  const removeItemHandler = (item) => {\r\n    ctxDispatch({ type: 'CART_REMOVE_ITEM', payload: item });\r\n  };\r\n\r\n  const checkoutHandler = () => {\r\n    navigate('/signin?redirect=/shipping');\r\n  };\r\n  \r\n  return (\r\n    <div>\r\n      <Helmet>\r\n        <title>Giỏ Hàng</title>\r\n      </Helmet>\r\n      <h1>Giỏ Hàng</h1>\r\n      <Row>\r\n        <Col md={8}>\r\n          {cartItems.length === 0 ? (\r\n            <MessageBox>\r\n              Giỏ hàng đang trống. <Link to=\"/\">Hãy mua gì đó</Link>\r\n            </MessageBox>\r\n          ) : (\r\n            <ListGroup>\r\n              {cartItems.map((item) => (\r\n                <ListGroup.Item key={item._id}>\r\n                  <Row className=\"align-items-center\">\r\n                    <Col md={4}>\r\n                      <img\r\n                        src={item.image}\r\n                        alt={item.name}\r\n                        className=\"img-fluid rounded img-thumbnail\"\r\n                      ></img>{' '}\r\n                      <Link to={`/product/${item.slug}`}>{item.name}</Link>\r\n                    </Col>\r\n                    <Col md={3}>\r\n                    <Button\r\n                        onClick={() =>\r\n                          updateCartHandler(item, item.quantity - 1)\r\n                        }\r\n                        variant=\"light\"\r\n                        disabled={item.quantity === 1}\r\n                      >\r\n                        <i className=\"fas fa-minus-circle\"></i>\r\n                      </Button>{' '}\r\n                      <span>{item.quantity}</span>{' '}\r\n                      <Button\r\n                        variant=\"light\"\r\n                        onClick={() =>\r\n                            updateCartHandler(item, item.quantity + 1)\r\n                          }\r\n                        disabled={item.quantity === item.countInStock}\r\n                      >\r\n                        <i className=\"fas fa-plus-circle\"></i>\r\n                      </Button>\r\n                    </Col>\r\n                    <Col md={3}>{item.price}đ</Col>\r\n                    <Col md={2}>\r\n                    <Button\r\n                        onClick={() => removeItemHandler(item)}\r\n                        variant=\"light\"\r\n                      >\r\n                        <i className=\"fas fa-trash\"></i>\r\n                      </Button>\r\n                    </Col>\r\n                  </Row>\r\n                </ListGroup.Item>\r\n              ))}\r\n            </ListGroup>\r\n          )}\r\n        </Col>\r\n        <Col md={4}>\r\n          <Card>\r\n            <Card.Body>\r\n              <ListGroup variant=\"flush\">\r\n                <ListGroup.Item>\r\n                  <h3>\r\n                  Tổng thanh toán ({cartItems.reduce((a, c) => a + c.quantity, 0)}{' '}\r\n                    sản phẩm): {cartItems.reduce((a, c) => a + c.price * c.quantity, 0)}đ\r\n                  </h3>\r\n                </ListGroup.Item>\r\n                <ListGroup.Item>\r\n                  <div className=\"d-grid\">\r\n                    <Button\r\n                      type=\"button\"\r\n                      variant=\"primary\"\r\n                      onClick={checkoutHandler}\r\n                      disabled={cartItems.length === 0}\r\n                    >\r\n                      Thanh toán\r\n                    </Button>\r\n                  </div>\r\n                </ListGroup.Item>\r\n              </ListGroup>\r\n            </Card.Body>\r\n          </Card>\r\n        </Col>\r\n      </Row>\r\n    </div>\r\n  );\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}